extends html

block body
  body
    script(type='text/javascript').
      var doSearch = function() {
        event.preventDefault();
        var query = document.getElementById('query').value;
        fetch('http://localhost:2020/api/translations?filter[where][DE-DE][like]=Beispiel&filter[limit]=3', { method: 'get'
        }).then(function(res) {
          return res.json();
        }).then(function(json) {
          console.log(json);
        })
        .catch(function(err) {
          console.log(err);
        })
        window.history.pushState("", "", '/search?term='+query);
        console.log(query);
      }
    .container
      .a(name="top")
      .showResults
        header.row
          .col-xs-2.col-sm-1.col-md-1.col-lg-1
            #logo
              a(href="/")
                img(src='/img/logo-vangilst.jpg' class='logo' alt='Logo Term Search')
          .col-xs-10.col-sm-9.col-md-7.col-lg-6
            form(action='/search' method='post' onsubmit='doSearch()')
              .input-group
                input.form-control(type='search' id='query' value=searchTerm || '' name='q' placeholder=germanStr || '', style='overflow: hidden; text-overflow: ellipsis; white-space: nowrap')
                span.input-group-btn
                  button.btn.btn-primary(type='submit')
                    span.glyphicon.glyphicon-search(aria-hidden='true')
        #results.row
          .col-xs-12.col-sm-10.col-md-8.col-lg-7
            #static-results()
              block breadcrumbs
              block results
  
        footer.row
          .col-xs-12.col-sm-10.col-md-8.col-lg-7
            include ./includes/footertext.jade      
    
    include ./includes/analytics.jade
